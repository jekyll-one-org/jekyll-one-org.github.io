

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/j1_template.js
 # JS Adapter for J1 Template
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2020 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # For details, see https://jekyll.one
 # -----------------------------------------------------------------------------
 #  TODO:
 #    MANAGE themeExtensionCss is to be checked
 #
 # -----------------------------------------------------------------------------
 # Adapter generated: 2020-10-13 19:03:49 +0200
 # -----------------------------------------------------------------------------
*/
'use strict';var j1=function(){function e(e,t){for(var o=Array.prototype.slice.call(arguments,2),a=e.split('.'),r=a.pop(),i=0;i<a.length;i++)t=t[a[i]];return t[r].apply(t,o)}var t,o,a,r,i,n,s,d,c,l,u=new RegExp('navigator|dateview|tagview|archive'),p='production',g='not_started',m='not_detected',h=!1,f='production'===p?'/assets/themes/j1/core/css/themes/theme-extensions.min.css':'/assets/themes/j1/core/css/themes/theme-extensions.css',v=[],_={app_session:'j1.app.session',user_session:'j1.user.session',user_state:'j1.user.state'},j={mode:'na',locale:navigator.language||navigator.userLanguage,user_name:'guest',provider:'j1',provider_membership:'guest',provider_permissions:'public,public',provider_site_url:'https://jekyll.one',provider_home_url:'https://jekyll.one',provider_blog_url:'/pages/public/blog/navigator/',provider_member_url:'/pages/public/learn/whats_up/',provider_privacy_url:'/pages/public/legal/en/privacy/',requested_page:'na',previous_page:'na',last_pager:'/pages/public/blog/navigator/'},b={theme_css:"",theme_name:"",theme_author:"",theme_version:'2020.0.23',cookies_accepted:'pending',whitelistedPages:v,deleteOnDecline:!1,showConsentOnPending:!1,stopScrolling:!0,session_active:!1,last_session_ts:'',cc_authenticated:!1};return{init:function(e){var t=log4javascript.getLogger('j1.init'),a=new liteURL(window.location.href),s=a.origin,c=new Date,p=c.toISOString(),m='started',h=$.extend({foo:'foo_option',bar:'bar_option'},e);if(j1.xhrDataState={},j1.xhrDOMState={},window.addEventListener('beforeunload',function(){var e=j1.getCookieNames(),t=e.user_state,o=(e.user_session,new Date),a=o.toISOString(),r=j1.readCookie(t);r.session_active=!1,r.last_session_ts=a,j1.writeCookie({name:t,data:r,expires:365})}),j.created=p,j.timestamp=p,j=j1.existsCookie(_.user_session)?j1.readCookie(_.user_session):j1.writeCookie({name:_.user_session,data:j}),b=j1.existsCookie(_.user_state)?j1.readCookie(_.user_state):j1.writeCookie({name:_.user_state,data:b,expires:365}),b.session_active=!0,j1.writeCookie({name:_.user_state,data:b,expires:365}),'na'===j.mode){var a=new liteURL(window.location.href),v=s+"/status?page="+window.location.pathname;s=a.origin,$.when($.ajax(v)).then(function(e){var t=log4javascript.getLogger('j1.init');j=j1.readCookie(_.user_session),j.mode='app',j.requested_page=window.location.pathname,j.timestamp=p,j=j1.mergeData(j,e),d='mode detected: '+j.mode,t.info(d),t.info('update user session cookie'),j1.writeCookie({name:_.user_session,data:j}),j1.setState(m),t.info('state: '+j1.getState());var o=setInterval(function(){'finished'==j1.getState()&&j1.authEnabled()&&('true'===j.authenticated?(t.info('show signout icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignOut'),$('#iconSignInOut').removeClass('mdi-login').addClass('mdi-logout')):(t.info('show signin icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignIn'),$('#iconSignInOut').removeClass('mdi-logout').addClass('mdi-login')),t.info('authentication detected as: '+j.authenticated),$('#quickLinksSignInOutButton').css('display','block'),t.info('met dependencies for: j1'),clearInterval(o))},25)})["catch"](function(){setTimeout(function(){var e=log4javascript.getLogger('j1.init');j=j1.readCookie(_.user_session),j.mode='web',j.requested_page=window.location.pathname,j.timestamp=p,d='mode detected: '+j.mode,e.info(d),j1.writeCookie({name:_.user_session,data:j}),j1.setState(m),e.info('state: '+j1.getState())},50)})}else g='started',t.info('state: '+g),t.info('page is being initialized');g='started',t.info('state: '+g),t.info('page is being initialized'),'false'===h.scrollbar&&($('body').addClass('hide-scrollbar'),$('html').addClass('hide-scrollbar-moz')),t.info('read user state from cookie'),j=j1.readCookie(_.user_session),i=j.theme_name,n=j.theme_css,f=j.theme_extension_css,j.timestamp=p,l=new liteURL(document.referrer),o=window.location.pathname,j.requested_page=o,j.previous_page=''===l.search?''===l.pathname?o:l.pathname:''===j.previous_page||'na'===j.previous_page?'/':j.previous_page,u.test(j.previous_page)?(r=j.previous_page,j.last_pager=r):r=j.last_pager,t.info('update user session cookie'),j1.writeCookie({name:_.user_session,data:j}),j1.initBanner(h),j1.initPanel(h),j1.initFooter(h),g='running',t.info('state: '+g),t.info(d),j.timestamp=p,j1.writeCookie({name:_.user_session,data:j}),j1.core.bsFormClearButton(),j1.displayPage()},initBanner:function(){var e,t=log4javascript.getLogger('j1.initBanner'),o=[],a=function(t){return function(o,a,r){if('success'==a){var i=log4javascript.getLogger('j1.xhrData');e='loading banner completed on id: '+t,i.info(e),j1.setXhrDataState(t,a),j1.setXhrDomState(t,a),i.info('XHR data loaded in the DOM: '+t)}'error'==a&&(e='loading banner failed on id: '+t+', error: '+r.status+': '+r.statusText,i.error(e),j1.setXhrDataState(t,a),j1.setXhrDomState(t,a),g='failed',i.error('state: '+g))}};if(o.push('divider-1'),o.push('divider-2'),o.push('divider-3'),o.push('home_teaser_banner'),o.push('home_welcome_banner'),o.push('home_image_banner'),o.push('home_parallax_banner'),o.push('exception_container'),!o.length)return e='no banner found in site',t.info(e),!1;for(var r in o){var i='#'+o[r],n=$(i);if(n.length){e='loading banner on id: '+o[r],t.info(e);var s='/assets/data/banner/index.html '+i+' > *';n.load(s,a(i))}}return!0},initPanel:function(){var e,t=log4javascript.getLogger('j1.initPanel'),o=[],a=function(t){return function(o,a,r){var i=log4javascript.getLogger('j1.xhrData');'success'==a&&(e='loading panel completed on id: '+t,i.info(e),j1.setXhrDataState(t,a),j1.setXhrDomState(t,a),i.info('XHR data loaded in the DOM: '+t)),'error'==a&&(e='loading panel failed on id: '+t+', error '+r.status+': '+r.statusText,i.error(e),j1.setXhrDataState(t,a),j1.setXhrDomState(t,a),g='Error',i.error('state: '+g))}};if(o.push('home_intro_panel'),o.push('home_service_panel'),o.push('home_news_panel'),!o.length)return e='no panel found in site',t.info(e),!1;for(var r in o){var i='#'+o[r],n=$(i);if(n.length){e='loading panel on id: '+o[r],t.info(e);var s='/assets/data/panel/index.html '+i+' > *';n.load(s,a(i))}}return!0},initFooter:function(){var e,t=log4javascript.getLogger('j1.initFooter');e='loading footer started',t.info(e);var o=function(t){return function(o,a,r){var i=log4javascript.getLogger('j1.xhrData');'success'==a&&(e='footer loaded successfully on id: '+t,i.info(e),j1.setXhrDataState(t,a),j1.setXhrDomState(t,a),i.info('XHR data loaded in the DOM: '+t),e='initialization finished',i.info(e)),'error'==a&&(e='loading footer failed on id: '+t+', error '+r.status+': '+r.statusText,i.error(e),j1.setXhrDataState(t,a),j1.setXhrDomState(t,a),g='failed',i.error('state: '+g),e='initialization finished',i.info(e))}},a="#j1_footer",r=$(a);return r.length?(r.load('/assets/data/footer/index.html',o(a)),!0):(e='data not loaded',t.warn(e),j1.setXhrDataState(a,'not loaded'),j1.setXhrDomState(a,'pending'),!1)},displayPage:function(){var e,o=log4javascript.getLogger('j1.displayPage'),a=250,r=new liteURL(window.location.href),i=r.origin,n=i+"/status?page="+window.location.pathname,s=j1.readCookie(_.user_session),c=j1.readCookie(_.user_state),l=new liteURL(window.location.href),u={};o.info('finalize page'),j1.setCss(),d='loading page partials: started',o.info(d),j1.appDetected()?(o.info('mode detected: app'),$.when($.ajax(n)).then(function(o){var r=log4javascript.getLogger('j1.displayPage');if(s=j1.mergeData(s,o),s.current_page=l.pathname,j1.writeCookie({name:_.user_session,data:s}),u=s.provider_permissions,e=u.includes(s.page_permission),j1.authEnabled()&&'public'!==s.page_permission&&!1===e)if('true'===o.authenticated){var n=i+'/post_authentication';window.location.href=n}else if(j1.authEnabled()){var p=i+'/page_validation?page='+window.location.pathname;return window.location.href=p,!1}setTimeout(function(){$('#no_flicker').css('display','block'),'accepted'===c.cookies_accepted?(d='show cookie icon',r.info(d),$('#quickLinksCookieButton').css('display','block')):(d='hide cookie icon',r.info(d),$('#quickLinksCookieButton').css('display','none')),h&&(r.info('translator detected: google'),r.info('initialize language selector'),$('.goog-te-combo').addClass('form-control')),j1.authEnabled()&&('true'===s.authenticated?(r.info('show signout icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignOut'),$('#iconSignInOut').removeClass('mdi-login').addClass('mdi-logout')):(r.info('show signin icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignIn'),$('#iconSignInOut').removeClass('mdi-logout').addClass('mdi-login')),r.info('authentication detected as: '+s.authenticated),$('#quickLinksSignInOutButton').css('display','block')),j1.scrollTo(),s.previous_page!==s.current_page&&(d='page change detected',r.info(d),d='previous page: '+s.previous_page,r.info(d),d='current page: '+s.current_page,r.info(d)),r.info('update sidebar'),c=j1.readCookie(_.user_state),t=j1.mergeData(s,c),j1.core.navigator.updateSidebar(t),g='finished',d='state: '+g,r.info(d),d='page finalized successfully',r.info(d)},a)})):setTimeout(function(){j1.setState('finished'),o.info('state: finished'),o.info('page initialization: finished'),$('#no_flicker').css('display','block'),o.info('mode detected: web'),o.info('hide signin icon'),$('#quickLinksSignInOutButton').css('display','none'),s.current_page=l.pathname,j1.writeCookie({name:_.user_session,data:s}),h&&(o.info('translator detected: google'),o.info('initialize language selector'),$('.goog-te-combo').addClass('form-control')),'accepted'===c.cookies_accepted?(d='show cookie icon',o.info(d),$('#quickLinksCookieButton').css('display','block')):(d='hide cookie icon',o.info(d),$('#quickLinksCookieButton').css('display','none')),j1.scrollTo(),s.previous_page!==s.current_page&&(d='page change detected',o.info(d),d='previous page: '+s.previous_page,o.info(d),d='current page: '+s.current_page,o.info(d)),o.info('update sidebar'),c=j1.readCookie(_.user_state),t=j1.mergeData(s,c),j1.core.navigator.updateSidebar(t),g='finished',d='state: '+g,o.info(d),d='page finalized successfully',o.info(d)},a)},mergeData:function(){for(var e=[].slice.call(arguments),t=e.shift(),o=0,a=e.length;o<a;o++)for(var r in e[o])t[r]=e[o][r];return t},getPrevPage:function(){return a},getLanguage:function(){navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},getTemplateVersion:function(){return'2020.0.23'},scrollTo:function(){var e,t=window.location.href.split('#')[1],o='#'+t;t&&o&&(e=$(o),e.length?j1.core.scrollSmooth.scroll(o,{duration:300,offset:-80,callback:null}):($(window).scrollTop($(window).scrollTop()+1),$(window).scrollTop($(window).scrollTop()-1)))},authEnabled:function(){log4javascript.getLogger('j1.authentication');return!1},appDetected:function(){var e,t=j1.existsCookie(_.user_session),o=!1;return t?(e=j1.readCookie(_.user_session),o='app'===e.mode):o=!1,o},xhrData:function(e,t,o){function a(e){e.forEach(function(e){e.addedNodes.length&&(i.info('XHR data loaded in the DOM: '+c),j1.setXhrDomState(c,'success'))})}var r,i=log4javascript.getLogger('j1.xhrData'),n=$('#'+e.xhr_container_id),s=o,d=function(e,t){return function(o,a,i){var n=log4javascript.getLogger('j1.xhrData');'success'===a&&(j1.setXhrDataState(t,a),j1.setXhrDomState(t,'pending'),r='data loaded successfully on id: '+t,n.info(r),s=!0),'error'===a&&void 0!==t&&(s='failed',n.info('set state for '+e+' to: '+s),j1.setXhrDataState(t,a),j1.setXhrDomState(t,'pending'),r='loading data failed on id: '+t+', error '+i.status+': '+i.statusText,n.error(r),s=!1)}},c='#'+e.xhr_container_id,l=$(c);if(l.length){var u=e.xhr_data_path+' > *';l.load(u,d(t,c));var p=window.MutationObserver||window.WebKitMutationObserver,g=new p(a),m={childList:!0,characterData:!1,attributes:!1,subtree:!1};n.each(function(){g.observe(this,m)})}else'#undefined'!=c&&(r='data not loaded on id:'+c,i.warn(r),j1.setXhrDataState(c,'not loaded'),j1.setXhrDomState(c,'not loaded'),s='finished',i.info('state: '+s),s=!1);return s},readCookie:function(e){var t;return!!j1.existsCookie(e)&&(t=window.atob(Cookies.get(e)),JSON.parse(t)||!1)},writeCookie:function(e){var t,o,a={name:'',data:{},path:'/',expires:0,secure:!1},r=$.extend(a,e),i=new Date,n=i.toISOString(),s={};return j1.existsCookie(r.name)?(s=j1.readCookie(r.name),s.timestamp=n,s=j1.mergeData(s,r.data),t=JSON.stringify(s),o=window.btoa(t),r.expires>0?Cookies.set(r.name,o,{expires:r.expires}):Cookies.set(r.name,o)):(s=r.data,t=JSON.stringify(r.data),o=window.btoa(t),r.expires>0?Cookies.set(r.name,o,{expires:r.expires}):Cookies.set(r.name,o)),!!j1.existsCookie(r.name)&&s},removeCookie:function(e){var t={name:'',path:'/'},o=$.extend(t,e);Cookies.remove(o.name,{path:o.path})},deleteCookie:function(e){var t=e,o=document.cookie.split('; ');if('all'===t)for(var a=0;a<o.length;a++)for(var r=window.location.hostname.split('.');r.length>0;){var i=encodeURIComponent(o[a].split(';')[0].split('=')[0])+'=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain='+r.join('.')+' ;path=',n=location.pathname.split('/');for(document.cookie=i+'/';n.length>0;)document.cookie=i+n.join('/'),n.pop();r.shift()}else document.cookie=t+'=;expires=Thu, 01 Jan 1970 00:00:00 GMT';return!0},existsCookie:function(e){var t=document.cookie,o=e+'=',a=t.indexOf('; '+o),r=t.length,i='';if(-1!==a)a+=2;else if(-1===(a=t.indexOf(o))||0!==a)return!1;return-1!==t.indexOf(';',a)&&(r=t.indexOf(';',a)),i=decodeURI(t.substring(a+o.length,r)).replace(/"/g,''),!!i.length},resolveMacros:function(e){var t=log4javascript.getLogger('j1.resolveMacros'),o=setInterval(function(){if($('#sidebar_mmenu').length)return Object.keys(e).length?($('[id^=macro-]').each(function(){$('#macro-provider').each(function(){var t=$(this),o=t.html();t.html(o.replace('??provider',e.provider)),this.href=this.href.replace(/.*\/??provider-site-url/,e.provider_site_url)}),$('#macro-user-name').each(function(){var t=$(this),o=t.html();t.html(o.replace('??user-name',e.user_name)),this.href=this.href.replace(/.*\/??provider_member_url/,e.provider_member_url)}),$('#macro-provider-permissions').each(function(){var t=$(this),o=t.html();t.html(o.replace('??provider-permissions',e.provider_permissions)),this.href=this.href.replace(/.*\/??provider_member_url/,e.provider_member_url)}),$('#macro-provider-membership').each(function(){var t=$(this),o=t.html();t.html(o.replace('??provider-membership',e.provider_membership)),this.href=this.href.replace(/.*\/??provider_member_url/,e.provider_member_url)}),$('#macro-cookie-state').each(function(){var t=$(this),o=t.html();t.html(o.replace('??cookie-state',e.cookies_accepted)),this.href=this.href.replace(/.*\/??provider_privacy_url/,e.provider_privacy_url)}),$('#macro-theme-name').each(function(){var t=$(this),o=t.html();t.html(o.replace('??theme-name',e.theme_name))}),$('#macro-theme-author').each(function(){var t=$(this),o=t.html();t.html(o.replace('??theme-author',e.theme_author)),this.href=this.href.replace(/.*\/??theme-author-url/,e.theme_author_url)}),$('#macro-theme-version').each(function(){var t=$(this),o=t.html();t.html(o.replace('??theme-version',e.theme_version))})}),t.info('met dependencies for: sidebarLoaded'),clearInterval(o),!0):(t.error('no user data provided'),clearInterval(o),!1)},25)},updateMacros:function(e){var t=log4javascript.getLogger('j1.updateMacros'),o=setInterval(function(){if($('#sidebar_mmenu').length)return Object.keys(e).length?($('[id^=macro-]').each(function(){$('#macro-provider').each(function(){var t=$(this),o=t.html();t.html(o.replace(/Provider:.*/,'Provider: '+e.provider)),$('#macro-provider').attr('href',e.provider_site_url)}),$('#macro-user-name').each(function(){var t=$(this),o=t.html();t.html(o.replace(/User:.*/,'User: '+e.user_name)),$('#macro-user-name').attr('href',e.provider_member_url)}),$('#macro-provider-permissions').each(function(){var t=$(this),o=t.html();t.html(o.replace(/public.*|protected.*|private.*|blocked.*/,e.provider_permissions)),$('#macro-provider-permissions').attr('href',e.provider_member_url)}),$('#macro-provider-membership').each(function(){var t=$(this),o=t.html();t.html(o.replace(/guest|member/,e.provider_membership)),$('#macro-provider-membership').attr('href',e.provider_member_url)}),$('#macro-cookie-state').each(function(){var t=$(this),o=t.html();t.html(o.replace(/accepted|declined|pending/,e.cookies_accepted)),$('#macro-cookie-state').attr('href',e.provider_privacy_url)})}),t.info('met dependencies for: sidebarLoaded'),clearInterval(o),!0):(t.error('no user data provided'),clearInterval(o),!1)},25)},getMessage:function(e,t,o){var t=j1.messages[e][t].message[o];return t},logger:function(e,t,o){var e=log4javascript.getLogger(e);return e[t](o),!0},sendMessage:function(t,o,a){var r=log4javascript.getLogger('j1.sendMessage'),i=JSON.stringify(a);'j1'===o?(d='send message from '+t+' to'+o+': '+i,r.debug(d),e("j1.messageHandler",window,t,a)):(d='send message from '+t+' to '+o+': '+i,r.debug(d),e(o+'.messageHandler',window,t,a))},messageHandler:function(e,t){var o=JSON.stringify(t);return d='received message from '+e+': '+o,s.debug(d),'command'===t.type&&'module_initialized'===t.action&&(c.setState('finished'),s.info(t.text)),!0},getStyleValue:function(e,t){var o,a='test-'+e,r=document.getElementById(a);return null===r&&(r=document.createElement('div'),r.className=e,r.style.display='none',document.body.appendChild(r)),o=$(r).css(t),document.body.removeChild(r),o},getStyleSheetLoaded:function(e){var t=document.styleSheets;t[t.length-1];for(var o in document.styleSheets)if(t[o].href&&t[o].href.indexOf(e)>-1)return!0},getCookieNames:function(){return _},setCss:function(){var e=log4javascript.getLogger('j1.setCss'),t=j1.getStyleValue('bg-primary','background-color');j1.getStyleValue('bg-secondary','background-color');e.info('set color scheme for selected theme'),$('head').append('<style>.g-bg-primary { background-color: '+t+' !important; }</style>'),$('head').append('<style>.iconify-md-bg-primary { color: '+t+' !important; }</style>'),$('head').append('<style>.fa-md-bg-primary { color: '+t+' !important; }</style>'),$('head').append('<style>.fas-md-bg-primary { color: '+t+' !important; }</style>'),$('head').append('<style>.mdi-md-bg-primary { color: '+t+' !important; }</style>');var o=t,a=j1.getStyleValue('btn-success','background-color'),r=j1.getStyleValue('btn-info','background-color'),i=j1.getStyleValue('icon-warning','color'),n=j1.getStyleValue('btn-danger','background-color');return $('head').append('<style>.icon-note { color: '+o+' !important; }</style>'),$('head').append('<style>.icon-tip { color: '+a+' !important; }</style>'),$('head').append('<style>.icon-important { color: '+r+' !important; }</style>'),$('head').append('<style>.icon-warning { color: '+i+' !important; }</style>'),$('head').append('<style>.icon-caution { color: '+n+' !important; }</style>'),$('head').append('<style>.tooltip-inner { background-color: '+t+' !important; }</style>'),$('head').append('<style>.bs-tooltip-auto[x-placement^=bottom] .arrow::before, .bs-tooltip-bottom .arrow::before { border-bottom-color: '+t+' !important; }</style>'),$('head').append('<style>.btn-viewer:hover { background-color: '+t+' !important; }</style>'),!0},setState:function(e){g=e},getState:function(){return g},setXhrDataState:function(e,t){j1.xhrDataState[e]=t},getXhrDataState:function(e){return j1.xhrDataState[e]},setXhrDomState:function(e,t){j1.xhrDOMState[e]=t},getXhrDOMState:function(e){return j1.xhrDOMState[e]},setMode:function(e){m=e},getMode:function(){return m},checkUserAgent:function(){return navigator.userAgent.search(ua_name)>=0},generateId:function(e){for(var t='',o='abcdefghijklmnopqrstuvwxyz0123456789',a=o.length,r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*a));return t},getTrue:function(){return!0},getFalse:function(){return!1},goHome:function(){'function'==typeof window.home?window.home():document.all?window.location.href='about:home':window.location.href='about:blank'},goBack:function(){window.location.href=document.referrer}}}(window);


