

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/j1_template.js
 # JS Adapter for J1 Template
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2020 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # For details, see https://jekyll.one
 # -----------------------------------------------------------------------------
 #  TODO:
 #    MANAGE themeExtensionCss is to be checked
 #
 # -----------------------------------------------------------------------------
 # Adapter generated: 2020-07-29 20:42:50 +0200
 # -----------------------------------------------------------------------------
*/
'use strict';var j1=function(){function e(e,t){for(var a=Array.prototype.slice.call(arguments,2),o=e.split('.'),r=o.pop(),i=0;i<o.length;i++)t=t[o[i]];return t[r].apply(t,a)}var t,a,o,r,i,n,s,c,d,l,u=new RegExp('navigator|dateview|tagview|archive'),p='production',g='not_started',m='not_detected',h=!1,f='production'===p?'/assets/themes/j1/core/css/theme_extensions.min.css':'/assets/themes/j1/core/css/theme_extensions.css',v='production'===p?'/assets/themes/j1/core/css/uno.min.css':'/assets/themes/j1/core/css/uno.css',_='Uno',j='J1 Team',k='https://jekyll.one/',b=[],w={app_session:'j1.app.session',user_session:'j1.user.session',user_state:'j1.user.state'},y={mode:'na',locale:navigator.language||navigator.userLanguage,user_name:'guest',provider:'j1',provider_membership:'guest',provider_permissions:'public,public',provider_site_url:'https://jekyll.one',provider_home_url:'https://jekyll.one',provider_blog_url:'/pages/public/blog/navigator/',provider_member_url:'/pages/public/learn/whats_up/',provider_privacy_url:'/pages/public/legal/en/privacy/',requested_page:'na',previous_page:'na',last_pager:'/pages/public/blog/navigator/'},S={theme_css:v,theme_extension_css:f,theme_name:_,theme_author:j,theme_author_url:'https://jekyll.one',theme_link:k,theme_version:'2020.0.16',cookies_accepted:'pending',whitelistedPages:b,deleteOnDecline:!1,showConsentOnPending:!1,stopScrolling:!0,session_active:!1,last_session_ts:'',cc_authenticated:!1};return{init:function(e){var t=log4javascript.getLogger('j1.init'),o=new liteURL(window.location.href),s=o.origin,d=new Date,p=d.toISOString(),m='started',h=$.extend({foo:'foo_option',bar:'bar_option'},e);if(j1.xhrDataState={},j1.xhrDOMState={},window.addEventListener('beforeunload',function(){var e=j1.getCookieNames(),t=e.user_state,a=(e.user_session,new Date),o=a.toISOString(),r=j1.readCookie(t);r.session_active=!1,r.last_session_ts=o,j1.writeCookie({name:t,data:r,expires:365})}),y.created=p,y.timestamp=p,y=j1.existsCookie(w.user_session)?j1.readCookie(w.user_session):j1.writeCookie({name:w.user_session,data:y}),S=j1.existsCookie(w.user_state)?j1.readCookie(w.user_state):j1.writeCookie({name:w.user_state,data:S,expires:365}),S.session_active=!0,j1.writeCookie({name:w.user_state,data:S,expires:365}),'na'===y.mode){var o=new liteURL(window.location.href),v=s+"/status?page="+window.location.pathname;s=o.origin,$.when($.ajax(v)).then(function(e){var t=log4javascript.getLogger('j1.init');y=j1.readCookie(w.user_session),y.mode='app',y.requested_page=window.location.pathname,y.timestamp=p,y=j1.mergeData(y,e),c='mode detected: '+y.mode,t.info(c),t.info('update user session cookie'),j1.writeCookie({name:w.user_session,data:y}),j1.setState(m),t.info('state: '+j1.getState());var a=setInterval(function(){'finished'==j1.getState()&&j1.authEnabled()&&('true'===y.authenticated?(t.info('show signout icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignOut'),$('#iconSignInOut').removeClass('mdi-login').addClass('mdi-logout')):(t.info('show signin icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignIn'),$('#iconSignInOut').removeClass('mdi-logout').addClass('mdi-login')),t.info('authentication detected as: '+y.authenticated),$('#quickLinksSignInOutButton').css('display','block'),clearInterval(a))},25)})["catch"](function(){setTimeout(function(){var e=log4javascript.getLogger('j1.init');y=j1.readCookie(w.user_session),y.mode='web',y.requested_page=window.location.pathname,y.timestamp=p,c='mode detected: '+y.mode,e.info(c),j1.writeCookie({name:w.user_session,data:y}),j1.setState(m),e.info('state: '+j1.getState())},50)})}else g='started',t.info('state: '+g),t.info('page is being initialized');g='started',t.info('state: '+g),t.info('page is being initialized'),'false'===h.scrollbar&&($('body').addClass('hide-scrollbar'),$('html').addClass('hide-scrollbar-moz')),t.info('read user state from cookie'),y=j1.readCookie(w.user_session),i=y.theme_name,n=y.theme_css,f=y.theme_extension_css,y.timestamp=p,l=new liteURL(document.referrer),a=window.location.pathname,y.requested_page=a,y.previous_page=''===l.search?''===l.pathname?a:l.pathname:''===y.previous_page||'na'===y.previous_page?'/':y.previous_page,u.test(y.previous_page)?(r=y.previous_page,y.last_pager=r):r=y.last_pager,t.info('update user session cookie'),j1.writeCookie({name:w.user_session,data:y}),j1.initBanner(h),j1.initPanel(h),j1.initFooter(h),g='running',t.info('state: '+g),t.info(c),y.timestamp=p,j1.writeCookie({name:w.user_session,data:y}),j1.core.bsFormClearButton(),j1.displayPage()},initBanner:function(){var e,t=log4javascript.getLogger('j1.initBanner'),a=[],o=function(t){return function(a,o,r){if('success'==o){var i=log4javascript.getLogger('j1.xhrData');e='loading banner completed on id: '+t,$(t).addClass("mutated"),i.info(e),j1.setXhrDataState(t,o),j1.setXhrDomState(t,o),i.info('XHR data loaded in the DOM: '+t)}'error'==o&&(e='loading banner failed on id: '+t+', error: '+r.status+': '+r.statusText,i.error(e),j1.setXhrDataState(t,o),j1.setXhrDomState(t,o),g='failed',i.error('state: '+g))}};if(a.push('divider-1'),a.push('divider-2'),a.push('divider-3'),a.push('home_teaser_banner'),a.push('home_welcome_banner'),a.push('home_image_banner'),a.push('home_parallax_banner'),a.push('exception_container'),!a.length)return e='no banner found in site',t.info(e),!1;for(var r in a){var i='#'+a[r],n=$(i);if(n.length){e='loading banner on id: '+a[r],t.info(e);var s='/assets/data/banner/index.html '+i+' > *';n.load(s,o(i))}}return!0},initPanel:function(){var e,t=log4javascript.getLogger('j1.initPanel'),a=[],o=function(t){return function(a,o,r){var i=log4javascript.getLogger('j1.xhrData');'success'==o&&(e='loading panel completed on id: '+t,i.info(e),j1.setXhrDataState(t,o),j1.setXhrDomState(t,o),i.info('XHR data loaded in the DOM: '+t)),'error'==o&&(e='loading panel failed on id: '+t+', error '+r.status+': '+r.statusText,i.error(e),j1.setXhrDataState(t,o),j1.setXhrDomState(t,o),g='Error',i.error('state: '+g))}};if(a.push('home_intro_panel'),a.push('home_service_panel'),a.push('home_news_panel'),!a.length)return e='no panel found in site',t.info(e),!1;for(var r in a){var i='#'+a[r],n=$(i);if(n.length){e='loading panel on id: '+a[r],t.info(e);var s='/assets/data/panel/index.html '+i+' > *';n.load(s,o(i))}}return!0},initFooter:function(){var e,t=log4javascript.getLogger('j1.initFooter');e='loading footer started',t.info(e);var a=function(t){return function(a,o,r){var i=log4javascript.getLogger('j1.xhrData');'success'==o&&(e='footer loaded successfully on id: '+t,i.info(e),$(t).addClass("mutated"),j1.setXhrDataState(t,o),j1.setXhrDomState(t,o),i.info('XHR data loaded in the DOM: '+t),e='initialization finished',i.info(e)),'error'==o&&(e='loading footer failed on id: '+t+', error '+r.status+': '+r.statusText,i.error(e),j1.setXhrDataState(t,o),j1.setXhrDomState(t,o),g='failed',i.error('state: '+g),e='initialization finished',i.info(e))}},o="#j1_footer",r=$(o);return r.length?(r.load('/assets/data/footer/index.html',a(o)),!0):(e='data not loaded',t.warn(e),j1.setXhrDataState(o,'not loaded'),j1.setXhrDomState(o,'pending'),!1)},displayPage:function(){var e,a=log4javascript.getLogger('j1.displayPage'),o=250,r=new liteURL(window.location.href),i=r.origin,n=i+"/status?page="+window.location.pathname,s=j1.readCookie(w.user_session),d=j1.readCookie(w.user_state),l=new liteURL(window.location.href),u={};a.info('finalize page'),j1.setCss(),c='loading page partials: started',a.info(c),j1.appDetected()?(a.info('mode detected: app'),$.when($.ajax(n)).then(function(a){var r=log4javascript.getLogger('j1.displayPage');if(s=j1.mergeData(s,a),s.current_page=l.pathname,j1.writeCookie({name:w.user_session,data:s}),u=s.provider_permissions,e=u.includes(s.page_permission),j1.authEnabled()&&'public'!==s.page_permission&&!1===e)if('true'===a.authenticated){var n=i+'/post_authentication';window.location.href=n}else if(j1.authEnabled()){var p=i+'/page_validation?page='+window.location.pathname;return window.location.href=p,!1}setTimeout(function(){$('#no_flicker').css('display','block'),'accepted'===d.cookies_accepted?(c='show cookie icon',r.info(c),$('#quickLinksCookieButton').css('display','block')):(c='hide cookie icon',r.info(c),$('#quickLinksCookieButton').css('display','none')),h&&(r.info('translator detected: google'),r.info('initialize language selector'),$('.goog-te-combo').addClass('form-control')),j1.authEnabled()&&('true'===s.authenticated?(r.info('show signout icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignOut'),$('#iconSignInOut').removeClass('mdi-login').addClass('mdi-logout')):(r.info('show signin icon'),$('#navLinkSignInOut').attr('data-target','#modalOmniSignIn'),$('#iconSignInOut').removeClass('mdi-logout').addClass('mdi-login')),r.info('authentication detected as: '+s.authenticated),$('#quickLinksSignInOutButton').css('display','block')),j1.scrollTo(),s.previous_page!==s.current_page&&(c='page change detected',r.info(c),c='previous page: '+s.previous_page,r.info(c),c='current page: '+s.current_page,r.info(c)),r.info('update sidebar'),d=j1.readCookie(w.user_state),t=j1.mergeData(s,d),j1.core.navigator.updateSidebar(t),g='finished',c='state: '+g,r.info(c),c='page finalized successfully',r.info(c)},o)})):setTimeout(function(){j1.setState('finished'),a.info('state: finished'),a.info('page initialization: finished'),$('#no_flicker').css('display','block'),a.info('mode detected: web'),a.info('hide signin icon'),$('#quickLinksSignInOutButton').css('display','none'),s.current_page=l.pathname,j1.writeCookie({name:w.user_session,data:s}),h&&(a.info('translator detected: google'),a.info('initialize language selector'),$('.goog-te-combo').addClass('form-control')),'accepted'===d.cookies_accepted?(c='show cookie icon',a.info(c),$('#quickLinksCookieButton').css('display','block')):(c='hide cookie icon',a.info(c),$('#quickLinksCookieButton').css('display','none')),j1.scrollTo(),s.previous_page!==s.current_page&&(c='page change detected',a.info(c),c='previous page: '+s.previous_page,a.info(c),c='current page: '+s.current_page,a.info(c)),a.info('update sidebar'),d=j1.readCookie(w.user_state),t=j1.mergeData(s,d),j1.core.navigator.updateSidebar(t),g='finished',c='state: '+g,a.info(c),c='page finalized successfully',a.info(c)},o)},mergeData:function(){for(var e=[].slice.call(arguments),t=e.shift(),a=0,o=e.length;a<o;a++)for(var r in e[a])t[r]=e[a][r];return t},getPrevPage:function(){return o},getLanguage:function(){navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},getTemplateVersion:function(){return'2020.0.16'},scrollTo:function(){var e,t=window.location.href.split('#')[1],a='#'+t;t&&a&&(e=$(a),e.length?j1.core.scrollSmooth.scroll(a,{duration:300,offset:-80,callback:null}):($(window).scrollTop($(window).scrollTop()+1),$(window).scrollTop($(window).scrollTop()-1)))},authEnabled:function(){log4javascript.getLogger('j1.authentication');return!1},appDetected:function(){var e,t=j1.existsCookie(w.user_session),a=!1;return t?(e=j1.readCookie(w.user_session),a='app'===e.mode):a=!1,a},xhrData:function(e,t,a){function o(e){e.forEach(function(e){e.addedNodes.length&&(i.info('XHR data loaded in the DOM: '+d),j1.setXhrDomState(d,'success'))})}var r,i=log4javascript.getLogger('j1.xhrData'),n=$('#'+e.xhr_container_id),s=a,c=function(e,t){return function(a,o,i){var n=log4javascript.getLogger('j1.xhrData');'success'===o&&(j1.setXhrDataState(t,o),j1.setXhrDomState(t,'pending'),r='data loaded successfully on id: '+t,n.info(r),s=!0),'error'===o&&void 0!==t&&(s='failed',n.info('set state for '+e+' to: '+s),j1.setXhrDataState(t,o),j1.setXhrDomState(t,'pending'),r='loading data failed on id: '+t+', error '+i.status+': '+i.statusText,n.error(r),s=!1)}},d='#'+e.xhr_container_id,l=$(d);if(l.length){var u=e.xhr_data_path+' > *';l.load(u,c(t,d));var p=window.MutationObserver||window.WebKitMutationObserver,g=new p(o),m={childList:!0,characterData:!1,attributes:!1,subtree:!1};n.each(function(){g.observe(this,m)})}else'#undefined'!=d&&(r='data not loaded on id:'+d,i.warn(r),j1.setXhrDataState(d,'not loaded'),j1.setXhrDomState(d,'not loaded'),s='finished',i.info('state: '+s),s=!1);return s},readCookie:function(e){var t;return!!j1.existsCookie(e)&&(t=window.atob(Cookies.get(e)),JSON.parse(t)||!1)},writeCookie:function(e){var t,a,o={name:'',data:{},path:'/',expires:0,secure:!1},r=$.extend(o,e),i=new Date,n=i.toISOString(),s={};return j1.existsCookie(r.name)?(s=j1.readCookie(r.name),s.timestamp=n,s=j1.mergeData(s,r.data),t=JSON.stringify(s),a=window.btoa(t),r.expires>0?Cookies.set(r.name,a,{expires:r.expires}):Cookies.set(r.name,a)):(s=r.data,t=JSON.stringify(r.data),a=window.btoa(t),r.expires>0?Cookies.set(r.name,a,{expires:r.expires}):Cookies.set(r.name,a)),!!j1.existsCookie(r.name)&&s},removeCookie:function(e){var t={name:'',path:'/'},a=$.extend(t,e);Cookies.remove(a.name,{path:a.path})},deleteCookie:function(e){var t=e,a=document.cookie.split('; ');if('all'===t)for(var o=0;o<a.length;o++)for(var r=window.location.hostname.split('.');r.length>0;){var i=encodeURIComponent(a[o].split(';')[0].split('=')[0])+'=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain='+r.join('.')+' ;path=',n=location.pathname.split('/');for(document.cookie=i+'/';n.length>0;)document.cookie=i+n.join('/'),n.pop();r.shift()}else document.cookie=t+'=;expires=Thu, 01 Jan 1970 00:00:00 GMT';return!0},existsCookie:function(e){var t=document.cookie,a=e+'=',o=t.indexOf('; '+a),r=t.length,i='';if(-1!==o)o+=2;else if(-1===(o=t.indexOf(a))||0!==o)return!1;return-1!==t.indexOf(';',o)&&(r=t.indexOf(';',o)),i=decodeURI(t.substring(o+a.length,r)).replace(/"/g,''),!!i.length},resolveMacros:function(e){var t=log4javascript.getLogger('j1.resolveMacros'),a=setInterval(function(){if($('#sidebar_mmenu').length)return Object.keys(e).length?($('[id^=macro-]').each(function(){$('#macro-provider').each(function(){var t=$(this),a=t.html();t.html(a.replace('??provider',e.provider)),this.href=this.href.replace(/.*\/??provider-site-url/,e.provider_site_url)}),$('#macro-user-name').each(function(){var t=$(this),a=t.html();t.html(a.replace('??user-name',e.user_name)),this.href=this.href.replace(/.*\/??provider_member_url/,e.provider_member_url)}),$('#macro-provider-permissions').each(function(){var t=$(this),a=t.html();t.html(a.replace('??provider-permissions',e.provider_permissions)),this.href=this.href.replace(/.*\/??provider_member_url/,e.provider_member_url)}),$('#macro-provider-membership').each(function(){var t=$(this),a=t.html();t.html(a.replace('??provider-membership',e.provider_membership)),this.href=this.href.replace(/.*\/??provider_member_url/,e.provider_member_url)}),$('#macro-cookie-state').each(function(){var t=$(this),a=t.html();t.html(a.replace('??cookie-state',e.cookies_accepted)),this.href=this.href.replace(/.*\/??provider_privacy_url/,e.provider_privacy_url)}),$('#macro-theme-name').each(function(){var t=$(this),a=t.html();t.html(a.replace('??theme-name',e.theme_name))}),$('#macro-theme-author').each(function(){var t=$(this),a=t.html();t.html(a.replace('??theme-author',e.theme_author)),this.href=this.href.replace(/.*\/??theme-author-url/,e.theme_author_url)}),$('#macro-theme-version').each(function(){var t=$(this),a=t.html();t.html(a.replace('??theme-version',e.theme_version))})}),clearInterval(a),!0):(t.error('no user data provided'),clearInterval(a),!1)},25)},updateMacros:function(e){var t=log4javascript.getLogger('j1.updateMacros'),a=setInterval(function(){if($('#sidebar_mmenu').length)return Object.keys(e).length?($('[id^=macro-]').each(function(){$('#macro-provider').each(function(){var t=$(this),a=t.html();t.html(a.replace(/Provider:.*/,'Provider: '+e.provider)),$('#macro-provider').attr('href',e.provider_site_url)}),$('#macro-user-name').each(function(){var t=$(this),a=t.html();t.html(a.replace(/User:.*/,'User: '+e.user_name)),$('#macro-user-name').attr('href',e.provider_member_url)}),$('#macro-provider-permissions').each(function(){var t=$(this),a=t.html();t.html(a.replace(/public.*|protected.*|private.*|blocked.*/,e.provider_permissions)),$('#macro-provider-permissions').attr('href',e.provider_member_url)}),$('#macro-provider-membership').each(function(){var t=$(this),a=t.html();t.html(a.replace(/guest|member/,e.provider_membership)),$('#macro-provider-membership').attr('href',e.provider_member_url)}),$('#macro-cookie-state').each(function(){var t=$(this),a=t.html();t.html(a.replace(/accepted|declined|pending/,e.cookies_accepted)),$('#macro-cookie-state').attr('href',e.provider_privacy_url)})}),clearInterval(a),!0):(t.error('no user data provided'),clearInterval(a),!1)},25)},getMessage:function(e,t,a){var t=j1.messages[e][t].message[a];return t},logger:function(e,t,a){var e=log4javascript.getLogger(e);return e[t](a),!0},sendMessage:function(t,a,o){var r=log4javascript.getLogger('j1.sendMessage'),i=JSON.stringify(o);'j1'===a?(c='send message from '+t+' to'+a+': '+i,r.debug(c),e("j1.messageHandler",window,t,o)):(c='send message from '+t+' to '+a+': '+i,r.debug(c),e(a+'.messageHandler',window,t,o))},messageHandler:function(e,t){var a=JSON.stringify(t);return c='received message from '+e+': '+a,s.debug(c),'command'===t.type&&'module_initialized'===t.action&&(d.setState('finished'),s.info(t.text)),!0},getStyleValue:function(e,t){var a,o='test-'+e,r=document.getElementById(o);return null===r&&(r=document.createElement('div'),r.className=e,r.style.display='none',document.body.appendChild(r)),a=$(r).css(t),document.body.removeChild(r),a},getCookieNames:function(){return w},setCss:function(){var e=log4javascript.getLogger('j1.setCss'),t=j1.getStyleValue('bg-primary','background-color');e.info('set color scheme for selected theme'),$('head').append('<style>.g-bg-primary { background-color: '+t+' !important; }</style>'),$('head').append('<style>.iconify-md-bg-primary { color: '+t+' !important; }</style>'),$('head').append('<style>.fa-md-bg-primary { color: '+t+' !important; }</style>'),$('head').append('<style>.fas-md-bg-primary { color: '+t+' !important; }</style>'),$('head').append('<style>.mdi-md-bg-primary { color: '+t+' !important; }</style>');var a=j1.getStyleValue('btn-success','background-color'),o=j1.getStyleValue('btn-warning','background-color'),r=j1.getStyleValue('icon-warning','color'),i=j1.getStyleValue('btn-danger','background-color');return $('head').append("<style>.icon-note { color: #0D47A1 !important; }</style>"),$('head').append('<style>.icon-tip { color: '+a+' !important; }</style>'),$('head').append('<style>.icon-important { color: '+o+' !important; }</style>'),$('head').append('<style>.icon-warning { color: '+r+' !important; }</style>'),$('head').append('<style>.icon-caution { color: '+i+' !important; }</style>'),$('head').append('<style>code { color: '+t+' !important; }</style>'),$('head').append('<style>.tooltip-inner { background-color: '+t+' !important; }</style>'),$('head').append('<style>.btn-viewer:hover { background-color: '+t+' !important; }</style>'),!0},setState:function(e){g=e},getState:function(){return g},setXhrDataState:function(e,t){j1.xhrDataState[e]=t},getXhrDataState:function(e){return j1.xhrDataState[e]},setXhrDomState:function(e,t){j1.xhrDOMState[e]=t},getXhrDOMState:function(e){return j1.xhrDOMState[e]},setMode:function(e){m=e},getMode:function(){return m},checkUserAgent:function(){return navigator.userAgent.search(ua_name)>=0},generateId:function(e){for(var t='',a='abcdefghijklmnopqrstuvwxyz0123456789',o=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*o));return t},getTrue:function(){return!0},getFalse:function(){return!1},goHome:function(){'function'==typeof window.home?window.home():document.all?window.location.href='about:home':window.location.href='about:blank'},goBack:function(){window.location.href=document.referrer}}}(window);


