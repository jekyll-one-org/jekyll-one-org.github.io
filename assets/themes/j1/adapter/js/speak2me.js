

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/speak2me.js
 # J1 Adapter for the speak2me module
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023 Juergen Adams
 #
 # J1 Theme is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE.md
 # -----------------------------------------------------------------------------
 # NOTE: Wave styles defind in /assets/data/panel.html, key 'wave'
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2023-09-14 22:19:01 +0200
 # -----------------------------------------------------------------------------
*/
'use strict';j1.adapter.speak2me=function(e,t){var a,i,o,n,s,r,l,d,u=e.getCookieNames(),c=(e.readCookie(u.user_state),/Firefox/i.test(navigator.userAgent)),p=/chrome/i.test(navigator.userAgent),m=/Edg/i.test(navigator.userAgent),_=/OPR/i.test(navigator.userAgent),v=/Avast/i.test(navigator.userAgent),k=p&&!m,b=!1,g=t.orientation!==undefined;return{init:function(t){$.extend({module_name:'j1.adapter.speak2me',generated:'2023-09-14 22:19:01 +0200'},t);a=null!=t?$.extend({},t):{},i=$.extend({},{enabled:!1,dialogContainerID:"speak2me_container",speechSelector:"main",modal:{title:"Text-2-Speech Translation",settings:{voice_settings_title:"Voice Settings",voice_select_title:"Select a voice",voice_control_title:"Voice Control",speak_button_text:"Speak",speak_button_style:"success",stop_button_text:"Stop",stop_button_style:"primary",pause_button_text:"Pause",pause_button_style:"info",resume_button_text:"Resume",resume_button_style:"info",exit_button_text:"Close",exit_button_style:"warning",voice_speed_min:.1,voice_speed_max:3,voice_speed_step:.1,voice_speed_value:1,voice_speed_label:"Speed",voice_speed_max_label:1,voice_pitch_min:.1,voice_pitch_max:2,voice_pitch_step:.1,voice_pitch_value:.9,voice_pitch_label:"Pitch",voice_pitch_max_label:.9,voice_volume_min:0,voice_volume_max:1,voice_volume_step:.1,voice_volume_value:.9,voice_volume_label:"Volume",voice_volume_max_label:.9}}}),o=$.extend({},{enabled:!0}),n=$.extend(!0,{},i,o,a),b="false"==n.tts,r=e.adapter.speak2me,l=log4javascript.getLogger('j1.adapter.speak2me'),r.setState('started'),l.debug("\nstate: "+r.getState()),l.info("\nmodule is being initialized");var d=setInterval(function(){var t='block'==$('#no_flicker').css("display"),a='finished'==e.adapter.attic.getState();if('finished'===e.getState()&&t&&a){if(g)return console.log('module speak2me is currently not supported for the Opera browser'),$('#quickLinksSpeakButton').hide(),void clearInterval(d);if(_)return console.log('module speak2me is currently not supported for the Firefox browser'),$('#quickLinksSpeakButton').hide(),void clearInterval(d);if(v)return console.log('module speak2me is currently not supported for the Avast Secure browser'),$('#quickLinksSpeakButton').hide(),void clearInterval(d);if(c)return console.log('module speak2me is currently not supported on mobile devices'),$('#quickLinksSpeakButton').hide(),void clearInterval(d);if(k)setInterval(function(){$().speak2me('isSpeaking')&&($().speak2me('pause').speak2me('resume'),l.debug("\nspeak: send pause-resumed"))},1e4);if(b)return l.warn("\ntts detected: disabled"),$('#quickLinksSpeakButton').hide(),void clearInterval(d);(s=document.createElement('div')).id=n.dialogContainerID,s.style.display='none',s.setAttribute('class','modal fade'),s.setAttribute('tabindex','-1'),s.setAttribute('role','dialog'),s.setAttribute('aria-labelledby',n.dialogContainerID),document.body.append(s),e.loadHTML({xhr_container_id:'speak2me_container',xhr_data_path:'/assets/data/speak2me/index.html',xhr_data_element:'speak2me-modal-data'},'j1.adapter.rtextResizer','null'),$('#speak2me_container').on('show.bs.modal',function(){(k||m)&&(l.warn("\nchromium browser detected: pause|resume buttons disabled"),$('#pause_button').hide(),$('#resume_button').hide()),r.create('#voiceSelector')}),r.setState('finished'),l.debug("\nstate: "+r.getState()),l.info("\nmodule initialization finished"),clearInterval(d)}},10)},create:function(e){1!=$('#voiceSelect').length&&0===$().speak2me('getVoices',e,'Select a voice')&&$(e).remove()},showDialog:function(){l.debug("\nshowDialog"),$('#speak2me_container').modal({backdrop:'static',keyboard:!1}),$('#speak2me_container').modal('show')},update:function(e,t){var a=parseFloat(t).toFixed(1);$(e).parent().find('span').text(a)},speak:function(e){var t=parseFloat(document.getElementById('rate').value),a=parseFloat(document.getElementById('pitch').value),i=parseFloat(document.getElementById('volume').value);$(e).speak2me('rate',t).speak2me('pitch',a).speak2me('volume',i);var o=$(e).speak2me('speak');$(".mdib-speaker").addClass("mdib-spin"),o.addEventListener('error',e=>{console.log('speak2me error:',e)})},pause:function(){$().speak2me('pause'),$(".mdib-speaker").removeClass("mdib-spin")},resume:function(){$().speak2me('resume'),$(".mdib-speaker").addClass("mdib-spin")},stop:function(){$().speak2me('stop'),$(".mdib-speaker").removeClass("mdib-spin")},messageHandler:function(e,t){var a=JSON.stringify(t,undefined,2);return d="\nreceived message from "+e+': '+a,l.debug(d),'command'===t.type&&'module_initialized'===t.action&&l.info('\n'+t.text),!0},setState:function(e){r.state=e},getState:function(){return r.state}}}(j1,window);


