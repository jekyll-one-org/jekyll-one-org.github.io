

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/advertising.js
 # J1 Adapter for advertising
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023 Juergen Adams
 #
 # J1 Theme is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE.md
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2023-07-05 17:16:14 +0200
 # -----------------------------------------------------------------------------
*/
'use strict';j1.adapter.advertising=function(e,t){var n,o,a,d,i,l,s,r,c,u,g,p,m,f,b,y,_,h,v,k='production',w=!!k.includes('prod'),I=!!k.includes('dev'),E=((new Date).toISOString(),document.createElement('script')),A=(document.createElement('div'),document.createElement('ins'),document.createElement('script'),'Google Adsense');return{init:function(k){$.extend({module_name:'j1.adapter.advertising',generated:'2023-07-05 17:16:14 +0200'},k);h=log4javascript.getLogger('j1.adapter.advertising'),_=e.adapter.advertising,m=e.getCookieNames(),f=e.readCookie(m.user_consent),g=new liteURL(t.location.href),p=g.hostname,i=null!=k?$.extend({},k):{},o=$.extend({},{enabled:!1,provider:"google",google:{autoHideOnUnfilled:!0,addBorderOnUnfilled:!0,checkTrackingProtection:!1,showErrorPageOnBlocked:!1}}),a=$.extend({},{enabled:!0,placement:"manual",google:{publisherID:"ca-pub-3885670015316130",autoPlaceAds:!1,autoHideOnUnfilled:!1,addBorderOnUnfilled:!0,ads:[{ad:null,enabled:!1,id:"ad_5128488466",layout:"home",content_page:"home",publisherID:"ca-pub-3885670015316130",test:"on",styles:"display:block;",slot:5128488466,ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!1,id:"ad_7284712660",layout:"home",content_page:"home",publisherID:"ca-pub-3885670015316130",test:"on",styles:"display:block;",slot:7284712660,ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_5128488466",layout:"page",content_page:"preview_google_adsense",publisherID:"ca-pub-3885670015316130",test:"on",styles:"display:block;",slot:5128488466,ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_7522184684",layout:"page",content_page:"preview_google_adsense",publisherID:"ca-pub-3885670015316130",test:"on",styles:"display:block; text-align:center;",slot:7522184684,ad_layout:"in-article",ad_format:"fluid"},{ad:null,enabled:!1,id:"ad_4814313879",layout:"page",content_page:"preview_google_adsense",publisherID:"ca-pub-3885670015316130",test:"on",styles:"display:block;",slot:4814313879,ad_layout:"multiplex",ad_format:"autorelaxed",ui_type:"image_stacked",ui_rows:1,ui_columns:4}]}}),d=$.extend(!0,{},o,a,i),n=d.layout,b=d.google.publisherID,y=!!b.includes('pub-'),l=d.google.autoHideOnUnfilled,s=d.google.addBorderOnUnfilled,r=d.google.checkTrackingProtection,c=d.google.showErrorPageOnBlocked;var B=setInterval(function(){var n='block'==$('#content').css("display");if('finished'===e.getState()&&n){if(_.ad_initializer(),!y)return I&&(h.warn("\ninvalid publisher id: "+b),h.info("\nmodule disabled")),clearInterval(B),!1;if(_.setState('started'),I&&h.debug("\nstate: "+_.getState()),f.personalization){if(I&&h.info("\nadsense api is being initialized"),!y)return I&&(h.debug("\ninvalid publisherID detected for Google Adsense: "+b),h.info("\nskip initialization for provider: "+A)),!1;if(I&&h.info("\nuse publisherID for Google Adsense: "+b),I&&h.info("\nadd Google AdsenseAPI in section: head"),E.async=!0,E.id='gas-api',E.src='//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',E.setAttribute('data-ad-client',b),document.head.appendChild(E),I&&h.info("\nadsense api initialized"),setTimeout(function(){document.getElementsByClassName('adsbygoogle').length>0>0?(I&&h.info("\nsetup Google Ad monitoring"),_.ad_monitor()):I&&h.warn("\nno initialized Google Ads found in page")},1e3),r){I&&h.debug("\nrun checks for tracking protection"),_.check_tracking_protection();var o=setInterval(function(){if(void 0!==u){var e=navigator.DoNotTrack;u||e?(I&&(v="\ntracking protection: enabled",h.debug(v)),c&&(I&&h.error("\nredirect to error page (blocked content): HTML-447"),t.location.href='/447.html')):I&&(v="\ntracking protection: disabled",h.info(v))}clearInterval(o)},10)}else _.setState('finished'),I&&(h.debug("\nstate: "+_.getState()),h.info("\nmodule initialized successfully")),clearInterval(o)}else{w?(console.debug('cookies for personalization rejected'),console.debug('initialization of module advertising skipped')):(h.warn("\nuser consent on personalization: "+f.personalization),h.warn("\ninitializing module: skipped")),e.findCookie('__g').forEach(function(t){'localhost'==p?e.removeCookie({name:t,domain:!1,secure:!1}):e.removeCookie({name:t,domain:'.'+p,secure:!1})}),r&&(f.personalization||(I&&(v="\nconsent on cookies disabled for personalization",h.debug(v)),c&&(I&&h.error("\nredirect to error page (blocked content): HTML-447"),t.location.href='/448.html')))}clearInterval(B)}},10)},ad_initializer:function(){var o=setInterval(function(){var a='block'==$('#content').css("display"),i=document.getElementsByClassName('adsbygoogle').length>0,l=0;if('finished'===e.getState()&&a&&i){if(!y)return clearInterval(o),!1;if(d.google.ads.forEach(function(e){if(f.personalization){var t=document.getElementById(e.id);if(null!==t&&e.enabled&&e.layout==n){var o=document.createElement('ins');t.appendChild(o);var a='ins_'+e.id;o.setAttribute('id',a),o.className="adsbygoogle",document.getElementById(a).setAttribute('style',e.styles),document.getElementById(a).setAttribute('data-ad-test',e.test),document.getElementById(a).setAttribute('data-ad-client',e.publisherID),document.getElementById(a).setAttribute('data-ad-slot',e.slot),document.getElementById(a).setAttribute('data-ad-format',e.ad_format),'display'==e.ad_layout&&document.getElementById(a).setAttribute('data-full-width-responsive',e.ad_responsive),'multiplex'==e.ad_layout&&(document.getElementById(a).setAttribute('data-matched-content-ui-typ',e.ui_type),document.getElementById(a).setAttribute('data-matched-content-columns-num',e.ui_columns),document.getElementById(a).setAttribute('data-matched-content-rows-num',e.ui_rows)),l++}else e.layout==n&&I&&h.warn("\nad disabled on id "+e.id+' for slot: '+e.slot)}else I&&h.warn("\nskipped add settings on all ad containers")}),l>0){I&&h.info("\nads enabled found in page (total): "+l);var s=document.getElementsByClassName('adsbygoogle'),r=document.getElementsByClassName('adsbygoogle').length;r--,[].forEach.call(s,function(){r>0&&(adsbygoogle=t.adsbygoogle||[]).push({}),r--})}else I&&h.warn("\nno ads found in page for layout: "+n);clearInterval(o)}},10)},ad_monitor:function(){$('.adsbygoogle').attrchange({trackValues:!0,callback:function(e){var t=e.target.dataset,n=!e.target.className.includes('adsbygoogle-noablate'),o=!!'production'.includes('prod');if($('.adsbygoogle').is(":visible")&&n&&e.newValue!==e.oldValue)if('unfilled'===e.newValue)o?console.debug('detected ad blocks in state: unfilled'):h.warn("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue),s&&$('.adsbygoogle').addClass('border--dotted'),l&&(I&&h.info("\n hide ad on slot: "+t.adSlot),$('.adsbygoogle').hide());else if('filled'===e.newValue)I&&h.info("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue);else{var a=!!e.newValue.includes('display'),d=!!e.newValue.includes('dotted');a?o?console.info('detected ad blocks in state: filled'):h.info("\ndetected ad block on slot "+t.adSlot+' in state: filled'):d?o?console.info('detected ad blocks in state: unfilled'):h.info("\ndetected ad block on slot "+t.adSlot+' in state: unfilled'):o?console.warn('unknown ad state detected: '+e.newValue):h.warn("\nunknown ad state detected on slot "+t.adSlot+' : '+e.newValue)}}})},check_tracking_protection:function(){function e(){e.promise||(e.promise=new Promise(function(e,t){var n=Date.now(),o=new Image;o.onload=e,o.onerror=function(){Date.now()-n<50?t(new Error("Rejected.")):e(new Error("Takes too long."))},o.src='//www.facebook.com/tr/'}).then(()=>{u=!1})["catch"](e=>{u=!0,I&&t.debug("\ndetection details: "+e)}))}var t=log4javascript.getLogger('j1.adapter.advertising.monitor.tracking');I&&(v="\ncheck for trackingprotection",t.info(v)),e()},messageHandler:function(e,t){var n=JSON.stringify(t,undefined,2);return I&&(v="\nreceived message from "+e+': '+n,h.debug(v)),'command'===t.type&&'module_initialized'===t.action&&I&&h.info('\n'+t.text),!0},setState:function(e){_.state=e},getState:function(){return _.state}}}(j1,window);


