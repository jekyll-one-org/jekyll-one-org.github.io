

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/advertising.js
 # J1 Adapter for advertising
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023, 2024 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE.md
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2023-11-04 20:29:54 +0100
 # -----------------------------------------------------------------------------
*/
'use strict';j1.adapter.advertising=function(e,t){var n,a,o,d,i,l,s,r,c,u,g,f,p,m,b,y,h,v,k,_='production',w=!!_.includes('prod'),I=!!_.includes('dev'),E=((new Date).toISOString(),document.createElement('script')),A=(document.createElement('div'),document.createElement('ins'),document.createElement('script'),'Google Adsense');return{init:function(_){$.extend({module_name:'j1.adapter.advertising',generated:'2023-11-04 20:29:54 +0100'},_);v=log4javascript.getLogger('j1.adapter.advertising'),h=e.adapter.advertising,p=e.getCookieNames(),m=e.readCookie(p.user_consent),g=new liteURL(t.location.href),f=g.hostname,i=null!=_?$.extend({},_):{},a=$.extend({},{enabled:!1,provider:"google",google:{placement:"manual",autoPlaceAds:!1,autoHideOnUnfilled:!1,addBorderOnUnfilled:!0,checkTrackingProtection:!1,showErrorPageOnBlocked:!1}}),o=$.extend({},{enabled:!0,placement:"manual",google:{publisherID:"ca-pub-3885670015316130",autoPlaceAds:!1,autoHideOnUnfilled:!1,addBorderOnUnfilled:!0,ads:[{ad:null,enabled:!0,id:"ad_5128488466",layout:"home",content_page:"home",publisherID:"ca-pub-3885670015316130",test:"off",styles:"display:block;",slot:5128488466,ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_7284712660",layout:"home",content_page:"home",publisherID:"ca-pub-3885670015316130",test:"off",styles:"display:block;",slot:7284712660,ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_5128488466",layout:"page",content_page:"pages",publisherID:"ca-pub-3885670015316130",test:"off",styles:"display:block;",slot:5128488466,ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_7522184684",layout:"page",content_page:"pages",publisherID:"ca-pub-3885670015316130",test:"off",styles:"display:block; text-align:center;",slot:7522184684,ad_layout:"in-article",ad_format:"fluid"},{ad:null,enabled:!0,id:"ad_7522184684_post",layout:"post",content_page:"posts",publisherID:"ca-pub-3885670015316130",test:"off",styles:"display:block; text-align:center;",slot:7522184684,ad_layout:"in-article",ad_format:"fluid"}]}}),d=$.extend(!0,{},a,o,i),n=d.layout,b=d.google.publisherID,y=!!b.includes('pub-'),l=d.google.autoHideOnUnfilled,s=d.google.addBorderOnUnfilled,r=d.google.checkTrackingProtection,c=d.google.showErrorPageOnBlocked;var B=setInterval(function(){var n='block'==$('#content').css("display");if('finished'===e.getState()&&n){if(h.ad_initializer(),!y)return I&&(v.warn("\ninvalid publisher id: "+b),v.info("\nmodule disabled")),clearInterval(B),!1;if(h.setState('started'),I&&v.debug("\nstate: "+h.getState()),m.personalization){if(I&&v.info("\nadsense api is being initialized"),!y)return I&&(v.debug("\ninvalid publisherID detected for Google Adsense: "+b),v.info("\nskip initialization for provider: "+A)),!1;if(I&&v.info("\nuse publisherID for Google Adsense: "+b),I&&v.info("\nadd Google AdsenseAPI in section: head"),E.async=!0,E.id='gas-api',E.src='//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',E.setAttribute('data-ad-client',b),document.head.appendChild(E),I&&v.info("\nadsense api initialized"),setTimeout(function(){document.getElementsByClassName('adsbygoogle').length>0>0?(I&&v.info("\nsetup Google Ad monitoring"),h.ad_monitor()):I&&v.warn("\nno initialized Google Ads found in page")},1e3),r){I&&v.debug("\nrun checks for tracking protection"),h.check_tracking_protection();var a=setInterval(function(){if(void 0!==u){var e=navigator.DoNotTrack;u||e?(I&&(k="\ntracking protection: enabled",v.debug(k)),c&&(I&&v.error("\nredirect to error page (blocked content): HTML-447"),t.location.href='/447.html')):I&&(k="\ntracking protection: disabled",v.info(k))}clearInterval(a)},10)}else h.setState('finished'),I&&(v.debug("\nstate: "+h.getState()),v.info("\nmodule initialized successfully")),clearInterval(a)}else{w?(console.debug('cookies for personalization rejected'),console.debug('initialization of module advertising skipped')):(v.warn("\nuser consent on personalization: "+m.personalization),v.warn("\ninitializing module: skipped")),e.findCookie('__g').forEach(function(t){'localhost'==f?e.removeCookie({name:t,domain:!1,secure:!1}):e.removeCookie({name:t,domain:'.'+f,secure:!1})}),r&&(m.personalization||(I&&(k="\nconsent on cookies disabled for personalization",v.debug(k)),c&&(I&&v.error("\nredirect to error page (blocked content): HTML-447"),t.location.href='/448.html')))}clearInterval(B)}},10)},ad_initializer:function(){var a=setInterval(function(){var o='block'==$('#content').css("display"),i=document.getElementsByClassName('adsbygoogle').length>0,l=0;if('finished'===e.getState()&&o&&i){if(!y)return clearInterval(a),!1;if(d.google.ads.forEach(function(e){if(m.personalization){var t=document.getElementById(e.id);if(null!==t&&e.enabled&&e.layout==n){var a=document.createElement('ins');t.appendChild(a);var o='ins_'+e.id;a.setAttribute('id',o),a.className="adsbygoogle",document.getElementById(o).setAttribute('style',e.styles),document.getElementById(o).setAttribute('data-ad-test',e.test),document.getElementById(o).setAttribute('data-ad-client',e.publisherID),document.getElementById(o).setAttribute('data-ad-slot',e.slot),document.getElementById(o).setAttribute('data-ad-format',e.ad_format),'display'==e.ad_layout&&document.getElementById(o).setAttribute('data-full-width-responsive',e.ad_responsive),'multiplex'==e.ad_layout&&(document.getElementById(o).setAttribute('data-matched-content-ui-typ',e.ui_type),document.getElementById(o).setAttribute('data-matched-content-columns-num',e.ui_columns),document.getElementById(o).setAttribute('data-matched-content-rows-num',e.ui_rows)),l++}else e.layout==n&&I&&v.warn("\nad disabled on id "+e.id+' for slot: '+e.slot)}else I&&v.warn("\nskipped add settings on all ad containers")}),l>0){I&&v.info("\nads enabled found in page (total): "+l);var s=document.getElementsByClassName('adsbygoogle'),r=document.getElementsByClassName('adsbygoogle').length;r--,[].forEach.call(s,function(){r>0&&(adsbygoogle=t.adsbygoogle||[]).push({}),r--})}else I&&v.warn("\nno ads found in page for layout: "+n);clearInterval(a)}},10)},ad_monitor:function(){$('.adsbygoogle').attrchange({trackValues:!0,callback:function(e){var t=e.target.dataset,n=!e.target.className.includes('adsbygoogle-noablate'),a=!!'production'.includes('prod');if($('.adsbygoogle').is(":visible")&&n&&e.newValue!==e.oldValue)if('unfilled'===e.newValue)a?console.debug('detected ad blocks in state: unfilled'):v.warn("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue),s&&$('.adsbygoogle').addClass('border--dotted'),l&&(I&&v.info("\n hide ad on slot: "+t.adSlot),$('.adsbygoogle').hide());else if('filled'===e.newValue)I&&v.info("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue);else{var o=!!e.newValue.includes('display'),d=!!e.newValue.includes('dotted');o?a?console.info('detected ad blocks in state: filled'):v.info("\ndetected ad block on slot "+t.adSlot+' in state: filled'):d?a?console.info('detected ad blocks in state: unfilled'):v.info("\ndetected ad block on slot "+t.adSlot+' in state: unfilled'):a?console.warn('unknown ad state detected: '+e.newValue):v.warn("\nunknown ad state detected on slot "+t.adSlot+' : '+e.newValue)}}})},check_tracking_protection:function(){function e(){e.promise||(e.promise=new Promise(function(e,t){var n=Date.now(),a=new Image;a.onload=e,a.onerror=function(){Date.now()-n<50?t(new Error("Rejected.")):e(new Error("Takes too long."))},a.src='//www.facebook.com/tr/'}).then(()=>{u=!1})["catch"](e=>{u=!0,I&&t.debug("\ndetection details: "+e)}))}var t=log4javascript.getLogger('j1.adapter.advertising.monitor.tracking');I&&(k="\ncheck for trackingprotection",t.info(k)),e()},messageHandler:function(e,t){var n=JSON.stringify(t,undefined,2);return I&&(k="\nreceived message from "+e+': '+n,v.debug(k)),'command'===t.type&&'module_initialized'===t.action&&I&&v.info('\n'+t.text),!0},setState:function(e){h.state=e},getState:function(){return h.state}}}(j1,window);


