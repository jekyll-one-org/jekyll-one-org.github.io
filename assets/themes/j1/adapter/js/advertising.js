

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/advertising.js
 # J1 Adapter for advertising
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023 Juergen Adams
 #
 # J1 Theme is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE.md
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2023-09-14 22:19:01 +0200
 # -----------------------------------------------------------------------------
*/
'use strict';j1.adapter.advertising=function(e,t){var n,o,a,i,d,l,s,r,c,u,g,f,m,p,b,y,h,v,k,w='production',_=!!w.includes('prod'),I=!!w.includes('dev'),E=((new Date).toISOString(),document.createElement('script')),A=(document.createElement('div'),document.createElement('ins'),document.createElement('script'),'Google Adsense');return{init:function(w){$.extend({module_name:'j1.adapter.advertising',generated:'2023-09-14 22:19:01 +0200'},w);v=log4javascript.getLogger('j1.adapter.advertising'),h=e.adapter.advertising,m=e.getCookieNames(),p=e.readCookie(m.user_consent),g=new liteURL(t.location.href),f=g.hostname,d=null!=w?$.extend({},w):{},o=$.extend({},{enabled:!1,provider:"google",google:{placement:"manual",autoPlaceAds:!1,autoHideOnUnfilled:!1,addBorderOnUnfilled:!0,checkTrackingProtection:!1,showErrorPageOnBlocked:!1}}),a=$.extend({},{enabled:!0,google:{publisherID:"<your-publisher-id>",ads:[{ad:null,enabled:!0,id:"ad_<your-slot-id>",layout:"home",content_page:"home",publisherID:"<your-publisher-id>",test:"on",styles:"display:block;",slot:"<your-slot-id>",ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_<your-slot-id>",layout:"page",content_page:"preview_google_adsense",publisherID:"<your-publisher-id>",test:"on",styles:"display:block;",slot:"<your-slot-id>",ad_layout:"display",ad_format:"auto",ad_responsive:!0}]}}),i=$.extend(!0,{},o,a,d),n=i.layout,b=i.google.publisherID,y=!!b.includes('pub-'),l=i.google.autoHideOnUnfilled,s=i.google.addBorderOnUnfilled,r=i.google.checkTrackingProtection,c=i.google.showErrorPageOnBlocked;var B=setInterval(function(){var n='block'==$('#content').css("display");if('finished'===e.getState()&&n){if(h.ad_initializer(),!y)return I&&(v.warn("\ninvalid publisher id: "+b),v.info("\nmodule disabled")),clearInterval(B),!1;if(h.setState('started'),I&&v.debug("\nstate: "+h.getState()),p.personalization){if(I&&v.info("\nadsense api is being initialized"),!y)return I&&(v.debug("\ninvalid publisherID detected for Google Adsense: "+b),v.info("\nskip initialization for provider: "+A)),!1;if(I&&v.info("\nuse publisherID for Google Adsense: "+b),I&&v.info("\nadd Google AdsenseAPI in section: head"),E.async=!0,E.id='gas-api',E.src='//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',E.setAttribute('data-ad-client',b),document.head.appendChild(E),I&&v.info("\nadsense api initialized"),setTimeout(function(){document.getElementsByClassName('adsbygoogle').length>0>0?(I&&v.info("\nsetup Google Ad monitoring"),h.ad_monitor()):I&&v.warn("\nno initialized Google Ads found in page")},1e3),r){I&&v.debug("\nrun checks for tracking protection"),h.check_tracking_protection();var o=setInterval(function(){if(void 0!==u){var e=navigator.DoNotTrack;u||e?(I&&(k="\ntracking protection: enabled",v.debug(k)),c&&(I&&v.error("\nredirect to error page (blocked content): HTML-447"),t.location.href='/447.html')):I&&(k="\ntracking protection: disabled",v.info(k))}clearInterval(o)},10)}else h.setState('finished'),I&&(v.debug("\nstate: "+h.getState()),v.info("\nmodule initialized successfully")),clearInterval(o)}else{_?(console.debug('cookies for personalization rejected'),console.debug('initialization of module advertising skipped')):(v.warn("\nuser consent on personalization: "+p.personalization),v.warn("\ninitializing module: skipped")),e.findCookie('__g').forEach(function(t){'localhost'==f?e.removeCookie({name:t,domain:!1,secure:!1}):e.removeCookie({name:t,domain:'.'+f,secure:!1})}),r&&(p.personalization||(I&&(k="\nconsent on cookies disabled for personalization",v.debug(k)),c&&(I&&v.error("\nredirect to error page (blocked content): HTML-447"),t.location.href='/448.html')))}clearInterval(B)}},10)},ad_initializer:function(){var o=setInterval(function(){var a='block'==$('#content').css("display"),d=document.getElementsByClassName('adsbygoogle').length>0,l=0;if('finished'===e.getState()&&a&&d){if(!y)return clearInterval(o),!1;if(i.google.ads.forEach(function(e){if(p.personalization){var t=document.getElementById(e.id);if(null!==t&&e.enabled&&e.layout==n){var o=document.createElement('ins');t.appendChild(o);var a='ins_'+e.id;o.setAttribute('id',a),o.className="adsbygoogle",document.getElementById(a).setAttribute('style',e.styles),document.getElementById(a).setAttribute('data-ad-test',e.test),document.getElementById(a).setAttribute('data-ad-client',e.publisherID),document.getElementById(a).setAttribute('data-ad-slot',e.slot),document.getElementById(a).setAttribute('data-ad-format',e.ad_format),'display'==e.ad_layout&&document.getElementById(a).setAttribute('data-full-width-responsive',e.ad_responsive),'multiplex'==e.ad_layout&&(document.getElementById(a).setAttribute('data-matched-content-ui-typ',e.ui_type),document.getElementById(a).setAttribute('data-matched-content-columns-num',e.ui_columns),document.getElementById(a).setAttribute('data-matched-content-rows-num',e.ui_rows)),l++}else e.layout==n&&I&&v.warn("\nad disabled on id "+e.id+' for slot: '+e.slot)}else I&&v.warn("\nskipped add settings on all ad containers")}),l>0){I&&v.info("\nads enabled found in page (total): "+l);var s=document.getElementsByClassName('adsbygoogle'),r=document.getElementsByClassName('adsbygoogle').length;r--,[].forEach.call(s,function(){r>0&&(adsbygoogle=t.adsbygoogle||[]).push({}),r--})}else I&&v.warn("\nno ads found in page for layout: "+n);clearInterval(o)}},10)},ad_monitor:function(){$('.adsbygoogle').attrchange({trackValues:!0,callback:function(e){var t=e.target.dataset,n=!e.target.className.includes('adsbygoogle-noablate'),o=!!'production'.includes('prod');if($('.adsbygoogle').is(":visible")&&n&&e.newValue!==e.oldValue)if('unfilled'===e.newValue)o?console.debug('detected ad blocks in state: unfilled'):v.warn("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue),s&&$('.adsbygoogle').addClass('border--dotted'),l&&(I&&v.info("\n hide ad on slot: "+t.adSlot),$('.adsbygoogle').hide());else if('filled'===e.newValue)I&&v.info("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue);else{var a=!!e.newValue.includes('display'),i=!!e.newValue.includes('dotted');a?o?console.info('detected ad blocks in state: filled'):v.info("\ndetected ad block on slot "+t.adSlot+' in state: filled'):i?o?console.info('detected ad blocks in state: unfilled'):v.info("\ndetected ad block on slot "+t.adSlot+' in state: unfilled'):o?console.warn('unknown ad state detected: '+e.newValue):v.warn("\nunknown ad state detected on slot "+t.adSlot+' : '+e.newValue)}}})},check_tracking_protection:function(){function e(){e.promise||(e.promise=new Promise(function(e,t){var n=Date.now(),o=new Image;o.onload=e,o.onerror=function(){Date.now()-n<50?t(new Error("Rejected.")):e(new Error("Takes too long."))},o.src='//www.facebook.com/tr/'}).then(()=>{u=!1})["catch"](e=>{u=!0,I&&t.debug("\ndetection details: "+e)}))}var t=log4javascript.getLogger('j1.adapter.advertising.monitor.tracking');I&&(k="\ncheck for trackingprotection",t.info(k)),e()},messageHandler:function(e,t){var n=JSON.stringify(t,undefined,2);return I&&(k="\nreceived message from "+e+': '+n,v.debug(k)),'command'===t.type&&'module_initialized'===t.action&&I&&v.info('\n'+t.text),!0},setState:function(e){h.state=e},getState:function(){return h.state}}}(j1,window);


