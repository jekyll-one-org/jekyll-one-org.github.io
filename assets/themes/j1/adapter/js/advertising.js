

  /*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/adapter/js/advertising.js
 # J1 Adapter for advertising
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2023, 2024 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # For details, see: https://github.com/jekyll-one-org/j1-template/blob/main/LICENSE.md
 # -----------------------------------------------------------------------------
 #  Adapter generated: 2024-04-01 01:16:05 +0200
 # -----------------------------------------------------------------------------
*/
'use strict';j1.adapter.advertising=((e,t)=>{var a,n,o,d,l,s,i,r,c,u,g,m,p,y,b,f='production',v=(f.includes('prod'),!!f.includes('dev'));(new Date).toISOString(),document.createElement('script'),document.createElement('div'),document.createElement('ins'),document.createElement('script');return{init:b=>{$.extend({module_name:'j1.adapter.advertising',generated:'2024-04-01 01:16:05 +0200'},b);y=log4javascript.getLogger('j1.adapter.advertising'),p=e.adapter.advertising,c=e.getCookieNames(),u=e.readCookie(c.user_consent),r=new liteURL(t.location.href),r.hostname,l=null!=b?$.extend({},b):{},n=$.extend({},{enabled:!1,provider:"google",google:{placement:"manual",autoPlaceAds:!1,autoHideOnUnfilled:!1,addBorderOnUnfilled:!0,checkTrackingProtection:!1,showErrorPageOnBlocked:!1}}),o=$.extend({},{enabled:!1,google:{publisherID:"<your-publisher-id>",ads:[{ad:null,enabled:!0,id:"ad_<your-slot-id>",layout:"home",content_page:"home",publisherID:"<your-publisher-id>",test:"on",styles:"display:block;",slot:"<your-slot-id>",ad_layout:"display",ad_format:"auto",ad_responsive:!0},{ad:null,enabled:!0,id:"ad_<your-slot-id>",layout:"page",content_page:"preview_google_adsense",publisherID:"<your-publisher-id>",test:"on",styles:"display:block;",slot:"<your-slot-id>",ad_layout:"display",ad_format:"auto",ad_responsive:!0}]}}),d=$.extend(!0,{},n,o,l),a=d.layout,g=d.google.publisherID,m=!!g.includes('pub-'),s=d.google.autoHideOnUnfilled,i=d.google.addBorderOnUnfilled,d.google.checkTrackingProtection,d.google.showErrorPageOnBlocked;var f=setInterval(()=>{var t='block'===$('#content').css("display");if('finished'===e.getState()&&t){Date.now();var a=document.getElementsByClassName('adsbygoogle').length;(y=log4javascript.getLogger('j1.adapter.advertising')).debug("\nfound ads in page: #"+a),y.debug("\nno ads initialized, advertising disabled"),clearInterval(f)}},10)},ad_initializer:()=>{var n=setInterval(()=>{var o='block'===$('#content').css("display"),l='finished'===e.getState(),s=document.getElementsByClassName('adsbygoogle').length>0,i=0;if(l&&o&&s){if(!m)return clearInterval(n),!1;if(d.google.ads.forEach(e=>{if(u.personalization){var t=document.getElementById(e.id);if(null!==t&&e.enabled&&e.layout===a){var n=document.createElement('ins');t.appendChild(n);var o='ins_'+e.id;n.setAttribute('id',o),n.className="adsbygoogle",document.getElementById(o).setAttribute('style',e.styles),document.getElementById(o).setAttribute('data-ad-test',e.test),document.getElementById(o).setAttribute('data-ad-client',e.publisherID),document.getElementById(o).setAttribute('data-ad-slot',e.slot),document.getElementById(o).setAttribute('data-ad-format',e.ad_format),'display'===e.ad_layout&&document.getElementById(o).setAttribute('data-full-width-responsive',e.ad_responsive),'multiplex'===e.ad_layout&&(document.getElementById(o).setAttribute('data-matched-content-ui-typ',e.ui_type),document.getElementById(o).setAttribute('data-matched-content-columns-num',e.ui_columns),document.getElementById(o).setAttribute('data-matched-content-rows-num',e.ui_rows)),i++}else e.layout===a&&y.warn("\nad disabled on id "+e.id+' for slot: '+e.slot)}else y.warn("\nskipped add settings on all ad containers")}),i>0){y.info("\nads enabled found in page (total): "+i);var r=document.getElementsByClassName('adsbygoogle'),c=document.getElementsByClassName('adsbygoogle').length;c--,[].forEach.call(r,()=>{c>0&&(adsbygoogle=t.adsbygoogle||[]).push({}),c--})}else y.warn("\nno ads found in page for layout: "+a);clearInterval(n)}},10)},ad_monitor:()=>{$('.adsbygoogle').attrchange({trackValues:!0,callback:e=>{var t=e.target.dataset,a=!e.target.className.includes('adsbygoogle-noablate'),n=!!'production'.includes('prod');if($('.adsbygoogle').is(":visible")&&a&&e.newValue!==e.oldValue)if('unfilled'===e.newValue)n?console.debug('detected ad blocks in state: unfilled'):y.warn("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue),i&&$('.adsbygoogle').addClass('border--dotted'),s&&(v&&y.info("\n hide ad on slot: "+t.adSlot),$('.adsbygoogle').hide());else if('filled'===e.newValue)y.info("\ndetected ad on slot "+t.adSlot+' in state: '+e.newValue);else{var o=!!e.newValue.includes('display'),d=!!e.newValue.includes('dotted');o?n?console.info('detected ad blocks in state: filled'):y.info("\ndetected ad block on slot "+t.adSlot+' in state: filled'):d?n?console.info('detected ad blocks in state: unfilled'):y.info("\ndetected ad block on slot "+t.adSlot+' in state: unfilled'):n?console.warn('unknown ad state detected: '+e.newValue):y.warn("\nunknown ad state detected on slot "+t.adSlot+' : '+e.newValue)}}})},check_tracking_protection:()=>{function e(){e.promise||(e.promise=new Promise((e,t)=>{var a=Date.now(),n=new Image;n.onload=e,n.onerror=(()=>{Date.now()-a<50?t(new Error("Rejected.")):e(new Error("Takes too long."))}),n.src='//www.facebook.com/tr/'}).then(()=>{!1})["catch"](e=>{!0,t.debug("\ndetection details: "+e)}))}var t=log4javascript.getLogger('j1.adapter.advertising.monitor.tracking');b="\ncheck for trackingprotection",t.info(b),e()},messageHandler:(e,t)=>{var a=JSON.stringify(t,undefined,2);return b="\nreceived message from "+e+': '+a,y.debug(b),'command'===t.type&&'module_initialized'===t.action&&v&&y.info('\n'+t.text),!0},setState:e=>{p.state=e},getState:()=>p.state}})(j1,window);


