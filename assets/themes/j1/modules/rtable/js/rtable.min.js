/*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/modules/rtable/js/rtable.min.js
 # Tablesaw v3.1.2 implementation for J1 Template
 #
 # Product/Info:
 # https://jekyll.one
 # https://github.com/filamentgroup/tablesaw
 #
 # Copyright (C) 2022 Juergen Adams
 # Copyright (c) 2013 Filament Group
 #
 # J1 Template is licensed under the MIT License.
 # See: https://github.com/jekyll-one-org/J1 Template/blob/master/LICENSE
 # Tablesaw is licensed under the MIT License.
 # See: https://github.com/filamentgroup/tablesaw/blob/master/LICENSE
 # -----------------------------------------------------------------------------
*/
!function(e,a){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e.Tablesaw=a(t,e)}):"object"==typeof exports?"document"in e?module.exports=a(require("jquery"),e):module.exports=a(require("jquery")(e),e):e.Tablesaw=a(jQuery,e)}("undefined"!=typeof window?window:this,function(h,c){"use strict";var u=c.document,a=/complete|loaded/.test(u.readyState);u.addEventListener("DOMContentLoaded",function(){a=!0});var p={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},breakpoint:{xl:"1200px",lg:"992px",md:"768px",sm:"576px",xs:"575px",default:"992px"},mustard:"head"in u&&(!c.blackberry||c.WebKitPoint)&&!c.operamini,$:h,_init:function(t,e){p.$(t||u).trigger("enhance.tablesaw"),p.options=e},init:function(t,e){(a=a||/complete|loaded/.test(u.readyState))?p._init(t,e):"addEventListener"in u&&u.addEventListener("DOMContentLoaded",function(){p._init(t,e)})}};return h(u).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(p.i18n=h.extend(p.i18n,TablesawConfig.i18n||{})),p.i18n.modes=[p.i18n.modeStack,p.i18n.modeSwipe,p.i18n.modeToggle]}),p.mustard&&h(u.documentElement).addClass("tablesaw-enhanced"),function(){var e="tablesaw",a="tablesaw-bar",n={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},i={},r=log4javascript.getLogger("j1.rtable");function t(t){if(!t)throw new Error("Tablesaw requires an element.");this.table=t,this.$table=h(t),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()}p.events=n,t.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id",e+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(e,this),this.$table.trigger(n.create,[this])},t.prototype.getConfig=function(t){t=h.extend(i,t||{});return h.extend(t,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},t.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},t.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!h(this).is("[data-tablesaw-ignorerow]")})},t.prototype._getRowIndex=function(t){return t.prevAll().length},t.prototype._getHeaderRowIndeces=function(){var t=this,e=[];return this._getHeaderRows().each(function(){e.push(t._getRowIndex(h(this)))}),e},t.prototype._getPrimaryHeaderCells=function(t){return(t||this._getPrimaryHeaderRow()).find("th")},t.prototype._$getCells=function(t){var a=this;return h(t).add(t.cells).filter(function(){var t=h(this),e=t.parent(),t=t.is("[colspan]");return!(e.is("["+a.attributes.subrow+"]")||e.is("["+a.attributes.ignorerow+"]")&&t)})},t.prototype._getVisibleColspan=function(){var e=0;return this._getPrimaryHeaderCells().each(function(){var t=h(this);"none"!==t.css("display")&&(e+=parseInt(t.attr("colspan"),10)||1)}),e},t.prototype.getColspanForCell=function(t){var e=this._getVisibleColspan(),a=0;return t.closest("tr").data("tablesaw-rowspanned")&&a++,t.siblings().each(function(){var t=h(this),e=parseInt(t.attr("colspan"),10)||1;"none"!==t.css("display")&&(a+=e)}),e-a},t.prototype.isCellInColumn=function(t,e){return h(t).add(t.cells).filter(function(){return this===e}).length},t.prototype.updateColspanCells=function(n,i,r){var o=this,t=o._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var t,e=h(this);"persist"===e.attr("data-tablesaw-priority")&&(t=e.closest("tr"),1<(e=parseInt(e.attr("rowspan"),10))&&((t=t.next()).data("tablesaw-rowspanned",!0),e--))}),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return h(this).closest("tr")[0]!==t[0]}).each(function(){var t,e,a=h(this);void 0!==r&&!o.isCellInColumn(i,this)||(t=o.getColspanForCell(a),n&&void 0!==r&&a[0===t?"addClass":"removeClass"](n),(e=parseInt(a.attr("data-tablesaw-maxcolspan"),10))?e<t&&(t=e):a.attr("data-tablesaw-maxcolspan",a.attr("colspan")),a.attr("colspan",t))})},t.prototype._findPrimaryHeadersForCell=function(t){for(var e=this._getPrimaryHeaderRow(),a=this._getRowIndex(e),n=[],i=0;i<this.headerMapping.length;i++)if(i!==a)for(var r=0;r<this.headerMapping[i].length;r++)this.headerMapping[i][r]===t&&n.push(this.headerMapping[a][r]);return n},t.prototype.getRows=function(){var t=this;return this.$table.find("tr").filter(function(){return h(this).closest("table").is(t.$table)})},t.prototype.getBodyRows=function(t){return(t?h(t):this.$tbody).children().filter("tr")},t.prototype.getHeaderCellIndex=function(t){for(var e=this.headerMapping[0],a=0;a<e.length;a++)if(e[a]===t)return a;return-1},t.prototype._initCells=function(){this.$table.find("[data-tablesaw-maxcolspan]").each(function(){var t=h(this);t.attr("colspan",t.attr("data-tablesaw-maxcolspan"))});var t=this.getRows(),o=[];t.each(function(t){o[t]=[]}),t.each(function(i){var r=0;h(this).children().each(function(){for(var t=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),e=parseInt(this.getAttribute("rowspan"),10);o[i][r];)r++;if(o[i][r]=this,t)for(var a=0;a<t-1;a++)r++,o[i][r]=this;if(e)for(var n=1;n<e;n++)o[i+n][r]=this;r++})});for(var e=this._getHeaderRowIndeces(),a=0;a<o[0].length;a++)for(var n=0,i=e.length;n<i;n++){var r,s=o[e[n]][a],l=e[n];for(s.cells||(s.cells=[]);l<o.length;)s!==(r=o[l][a])&&s.cells.push(r),l++}this.headerMapping=o},t.prototype.refresh=function(){this._initCells(),this.$table.trigger(n.refresh,[this])},t.prototype._getToolbarAnchor=function(){var t=this.$table.parent();return t.is(".tablesaw-overflow")?t:this.$table},t.prototype._getToolbar=function(t){return(t=t||this._getToolbarAnchor()).prev().filter("."+a)},t.prototype.createToolbar=function(){var t=this._getToolbarAnchor(),e=this._getToolbar(t);e.length||(e=h("<div>").addClass(a).insertBefore(t)),this.$toolbar=e,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},t.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var t=this.$table.attr("id");h(u).off("."+t),h(c).off("."+t),this.$table.trigger(n.destroy,[this]),this.$table.removeData(e)},h.fn[e]=function(){return this.each(function(){h(this).data(e)||new t(this)})};var o=h(u);o.on("enhance.tablesaw",function(t){p.mustard&&((t=h(t.target)).parent().length&&(t=t.parent()),t.find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]")[e]())});var s,l,d=!1;o.on("scroll.tablesaw",function(){d=!0,c.clearTimeout(s),s=c.setTimeout(function(){d=!1},300)}),h(c).on("resize",function(){h("table").each(function(){var t,e=h(this);h(e).hasClass("rtable")&&(h(c).width(),h(c).width()<p.options.breakpoint?(t="\nhide colgroups: "+e.attr("id"),e.find("colgroup").hide()):(t="\nshow colgroup: "+e.attr("id"),e.find("colgroup").show()),r.debug(t))}),d||(c.clearTimeout(l),l=c.setTimeout(function(){o.trigger(n.resize)},150))}),p.Table=t}(),function(){function a(t,e){this.tablesaw=e,this.$table=h(t),this.labelless=this.$table.is("["+o+"]"),this.hideempty=this.$table.is("["+s+"]"),this.$table.data(r,this)}var t="tablesaw-stack",n="tablesaw-cell-label",i="tablesaw-cell-content",r="tablesaw-stack",o="data-tablesaw-no-labels",s="data-tablesaw-hide-empty";a.prototype.init=function(){var a;this.$table.addClass(t),this.labelless||(a=this).$table.find("th, td").filter(function(){return!h(this).closest("thead").length}).filter(function(){return!(h(this).is("["+o+"]")||h(this).closest("tr").is("["+o+"]")||a.hideempty&&!h(this).html())}).each(function(){var o=h(u.createElement("b")).addClass(n),t=h(this);h(a.tablesaw._findPrimaryHeadersForCell(this)).each(function(t){var e=h(this.cloneNode(!0)),a=e.find(".tablesaw-sortable-btn");e.find(".tablesaw-sortable-arrow").remove();var n=e.find("[data-tablesaw-checkall]");if(n.closest("label").remove(),n.length)o=h([]);else{0<t&&o.append(u.createTextNode(", "));for(var i,r=(a.length?a:e)[0];i=r.firstChild;)o[0].appendChild(i)}}),o.length&&!t.find("."+i).length&&t.wrapInner("<span class='"+i+"'></span>");var e=t.find("."+n);e.length?e.replaceWith(o):(t.prepend(u.createTextNode(" ")),t.prepend(o))})},a.prototype.destroy=function(){this.$table.removeClass(t),this.$table.find("."+n).remove(),this.$table.find("."+i).each(function(){h(this).replaceWith(h(this.childNodes))})},h(u).on(p.events.create,function(t,e){"stack"===e.mode&&new a(e.table,e).init()}).on(p.events.refresh,function(t,e){"stack"===e.mode&&h(e.table).data(r).init()}).on(p.events.destroy,function(t,e){"stack"===e.mode&&h(e.table).data(r).destroy()}),p.Stack=a}(),p});
